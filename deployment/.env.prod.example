# XYNE Production Environment Configuration
# Copy this file to .env for production deployment

# =============================================================================
# KEYCLOAK CONFIGURATION
# =============================================================================

# Admin credentials (CHANGE THESE IN PRODUCTION!)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=your-secure-admin-password-here

# Keycloak port mapping (optional, defaults to 8081)
KEYCLOAK_PORT=8081

# Logging level (INFO, WARN, ERROR, DEBUG)
KC_LOG_LEVEL=INFO

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL credentials
POSTGRES_USER=xyne
POSTGRES_PASSWORD=your-secure-db-password-here

# Database port (optional, defaults to 5432)
XYNE_DB_PORT=5432

# =============================================================================
# XYNE APPLICATION CONFIGURATION
# =============================================================================

# Keycloak integration
KEYCLOAK_ENABLED=true
KEYCLOAK_BASE_URL=http://localhost:8081
KEYCLOAK_DEFAULT_REALM=xyne-shared
KEYCLOAK_CLIENT_ID=oa-backend
KEYCLOAK_CLIENT_SECRET=your-client-secret-from-setup

# Application secrets
USER_SECRET=your-jwt-secret-here
ACCESS_TOKEN_SECRET=your-access-token-secret-here
REFRESH_TOKEN_SECRET=your-refresh-token-secret-here

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Enable metrics and monitoring
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Resource limits (adjust based on your infrastructure)
# These are applied via docker-compose deploy section

# Keycloak Resources:
# - Memory: 1GB limit, 512MB reservation
# - CPU: 0.5 limit, 0.25 reservation

# PostgreSQL Resources (add if needed):
# - Memory: 2GB limit, 1GB reservation
# - CPU: 1.0 limit, 0.5 reservation

# Vespa Resources (already configured):
# - Memory: 20GB limit
# - CPU: Managed by ulimits

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. Change all default passwords
# 2. Use strong, unique secrets for JWT tokens
# 3. Configure proper CORS origins in application
# 4. Enable HTTPS in production with reverse proxy
# 5. Regularly rotate secrets and credentials
# 6. Use secret management systems for sensitive data

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# PostgreSQL data is persisted in: ../server/xyne-data/
# Vespa data is persisted in: ../server/vespa-data/
# Grafana data is persisted in: ./grafana/grafana-storage/

# Use deployment/backup-restore.sh for data management:
# ./backup-restore.sh backup production-$(date +%Y%m%d)
# ./backup-restore.sh restore production-YYYYMMDD